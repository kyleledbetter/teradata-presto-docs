

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>10.65. Release 0.80 &mdash; Teradata Presto 0.144-SNAPSHOT Documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/teradata.css" type="text/css" />
  

  

  
    <link rel="top" title="Teradata Presto 0.144-SNAPSHOT Documentation" href="../index.html"/>
        <link rel="up" title="10. Release Notes" href="../release.html"/>
        <link rel="next" title="10.66. Release 0.79" href="release-0.79.html"/>
        <link rel="prev" title="10.64. Release 0.81" href="release-0.81.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Teradata Presto
          

          
          </a>

          
            
            
              <div class="version">
                0.144-SNAPSHOT
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">3. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">4. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">5. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">6. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">7. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">8. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">9. Developer Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../release.html">10. Release Notes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="release-0.144.html">10.1. Release 0.144</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.143.html">10.2. Release 0.143</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.142.html">10.3. Release 0.142</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.141.html">10.4. Release 0.141</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.140.html">10.5. Release 0.140</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.139.html">10.6. Release 0.139</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.138.html">10.7. Release 0.138</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.137.html">10.8. Release 0.137</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.136.html">10.9. Release 0.136</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.135.html">10.10. Release 0.135</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.134.html">10.11. Release 0.134</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.133.html">10.12. Release 0.133</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.132.html">10.13. Release 0.132</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.131.html">10.14. Release 0.131</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.130.html">10.15. Release 0.130</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.129.html">10.16. Release 0.129</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.128.html">10.17. Release 0.128</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.127.html">10.18. Release 0.127</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.126.html">10.19. Release 0.126</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.125.html">10.20. Release 0.125</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.124.html">10.21. Release 0.124</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.123.html">10.22. Release 0.123</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.122.html">10.23. Release 0.122</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.121.html">10.24. Release 0.121</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.120.html">10.25. Release 0.120</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.119.html">10.26. Release 0.119</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.118.html">10.27. Release 0.118</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.117.html">10.28. Release 0.117</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.116.html">10.29. Release 0.116</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.115.html">10.30. Release 0.115</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.114.html">10.31. Release 0.114</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.113.html">10.32. Release 0.113</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.112.html">10.33. Release 0.112</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.111.html">10.34. Release 0.111</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.110.html">10.35. Release 0.110</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.109.html">10.36. Release 0.109</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.108.html">10.37. Release 0.108</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.107.html">10.38. Release 0.107</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.106.html">10.39. Release 0.106</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.105.html">10.40. Release 0.105</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.104.html">10.41. Release 0.104</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.103.html">10.42. Release 0.103</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.102.html">10.43. Release 0.102</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.101.html">10.44. Release 0.101</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.100.html">10.45. Release 0.100</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.99.html">10.46. Release 0.99</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.98.html">10.47. Release 0.98</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.97.html">10.48. Release 0.97</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.96.html">10.49. Release 0.96</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.95.html">10.50. Release 0.95</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.94.html">10.51. Release 0.94</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.93.html">10.52. Release 0.93</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.92.html">10.53. Release 0.92</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.91.html">10.54. Release 0.91</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.90.html">10.55. Release 0.90</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.89.html">10.56. Release 0.89</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.88.html">10.57. Release 0.88</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.87.html">10.58. Release 0.87</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.86.html">10.59. Release 0.86</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.85.html">10.60. Release 0.85</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.84.html">10.61. Release 0.84</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.83.html">10.62. Release 0.83</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.82.html">10.63. Release 0.82</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.81.html">10.64. Release 0.81</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">10.65. Release 0.80</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#new-hive-orc-reader">New Hive ORC Reader</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hive-changes">Hive Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cassandra-changes">Cassandra Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#big-query-support">&#8220;Big Query&#8221; Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="#metadata-only-query-optimization">Metadata-Only Query Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#general-changes">General Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="release-0.79.html">10.66. Release 0.79</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.78.html">10.67. Release 0.78</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.77.html">10.68. Release 0.77</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.76.html">10.69. Release 0.76</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.75.html">10.70. Release 0.75</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.74.html">10.71. Release 0.74</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.73.html">10.72. Release 0.73</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.72.html">10.73. Release 0.72</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.71.html">10.74. Release 0.71</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.70.html">10.75. Release 0.70</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.69.html">10.76. Release 0.69</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.68.html">10.77. Release 0.68</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.67.html">10.78. Release 0.67</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.66.html">10.79. Release 0.66</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.65.html">10.80. Release 0.65</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.64.html">10.81. Release 0.64</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.63.html">10.82. Release 0.63</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.62.html">10.83. Release 0.62</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.61.html">10.84. Release 0.61</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.60.html">10.85. Release 0.60</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.59.html">10.86. Release 0.59</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.58.html">10.87. Release 0.58</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.57.html">10.88. Release 0.57</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.56.html">10.89. Release 0.56</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.55.html">10.90. Release 0.55</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-0.54.html">10.91. Release 0.54</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Teradata Presto</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../release.html">10. Release Notes</a> &raquo;</li>
      
    <li>10.65. Release 0.80</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="../_sources/release/release-0.80.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="release-0-80">
<h1>10.65. Release 0.80</h1>
<div class="section" id="new-hive-orc-reader">
<h2>New Hive ORC Reader</h2>
<p>We have added a new ORC reader implementation. The new reader supports vectorized
reads, lazy loading, and predicate push down, all of which make the reader more
efficient and typically reduces wall clock time for a query. Although the new
reader has been heavily tested, it is an extensive rewrite of the Apache Hive
ORC reader, and may have some latent issues. If you are seeing issues, you can
disable the new reader on a per-query basis by setting the
<code class="docutils literal"><span class="pre">&lt;hive-catalog&gt;.optimized_reader_enabled</span></code> session property, or you can disable
the reader by default by setting the Hive catalog property
<code class="docutils literal"><span class="pre">hive.optimized-reader.enabled=false</span></code>.</p>
</div>
<div class="section" id="hive-changes">
<h2>Hive Changes</h2>
<ul class="simple">
<li>The maximum retry time for the Hive S3 file system can be configured
by setting <code class="docutils literal"><span class="pre">hive.s3.max-retry-time</span></code>.</li>
<li>Fix Hive partition pruning for null keys (i.e. <code class="docutils literal"><span class="pre">__HIVE_DEFAULT_PARTITION__</span></code>).</li>
</ul>
</div>
<div class="section" id="cassandra-changes">
<h2>Cassandra Changes</h2>
<ul class="simple">
<li>Update Cassandra driver to 2.1.0.</li>
<li>Map Cassandra <code class="docutils literal"><span class="pre">TIMESTAMP</span></code> type to Presto <code class="docutils literal"><span class="pre">TIMESTAMP</span></code> type.</li>
</ul>
</div>
<div class="section" id="big-query-support">
<h2>&#8220;Big Query&#8221; Support</h2>
<p>We&#8217;ve added experimental support for &#8220;big&#8221; queries. This provides a separate
queue controlled by the following properties:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">experimental.max-concurrent-big-queries</span></code></li>
<li><code class="docutils literal"><span class="pre">experimental.max-queued-big-queries</span></code></li>
</ul>
<p>There are separate configuration options for queries that are submitted with
the <code class="docutils literal"><span class="pre">experimental_big_query</span></code> session property:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">experimental.big-query-initial-hash-partitions</span></code></li>
<li><code class="docutils literal"><span class="pre">experimental.big-query-max-task-memory</span></code></li>
</ul>
<p>Queries submitted with this property will use hash distribution for all joins.</p>
</div>
<div class="section" id="metadata-only-query-optimization">
<h2>Metadata-Only Query Optimization</h2>
<p>We now support an optimization that rewrites aggregation queries that are insensitive to the
cardinality of the input (e.g., <a class="reference internal" href="../functions/aggregate.html#max" title="max"><code class="xref py py-func docutils literal"><span class="pre">max()</span></code></a>, <a class="reference internal" href="../functions/aggregate.html#min" title="min"><code class="xref py py-func docutils literal"><span class="pre">min()</span></code></a>, <code class="docutils literal"><span class="pre">DISTINCT</span></code> aggregates) to execute
against table metadata.</p>
<p>For example, if <code class="docutils literal"><span class="pre">key</span></code>, <code class="docutils literal"><span class="pre">key1</span></code> and <code class="docutils literal"><span class="pre">key2</span></code> are partition keys, the following queries
will benefit:</p>
<div class="highlight-sql"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="k">min</span><span class="p">(</span><span class="k">key</span><span class="p">),</span> <span class="k">max</span><span class="p">(</span><span class="k">key</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span><span class="p">;</span>

<span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="k">key</span> <span class="k">FROM</span> <span class="n">t</span><span class="p">;</span>

<span class="k">SELECT</span> <span class="k">count</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="k">key</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span><span class="p">;</span>

<span class="k">SELECT</span> <span class="k">count</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="k">key</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span><span class="p">;</span>

<span class="k">SELECT</span> <span class="k">count</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="k">key</span><span class="p">)</span> <span class="k">FROM</span> <span class="p">(</span><span class="k">SELECT</span> <span class="k">key</span> <span class="k">FROM</span> <span class="n">t</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="mi">1</span> <span class="k">LIMIT</span> <span class="mi">10</span><span class="p">);</span>

<span class="k">SELECT</span> <span class="n">key1</span><span class="p">,</span> <span class="k">count</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">key2</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
<p>This optimization is turned off by default. To turn it on, add <code class="docutils literal"><span class="pre">optimizer.optimize-metadata-queries=true</span></code>
to the coordinator config properties.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This optimization will cause queries to produce incorrect results if
the connector allows partitions to contain no data. For example, the
Hive connector will produce incorrect results if your Hive warehouse
contains partitions without data.</p>
</div>
</div>
<div class="section" id="general-changes">
<h2>General Changes</h2>
<ul>
<li><p class="first">Add support implicit joins. The following syntax is now allowed:</p>
<div class="highlight-sql"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="k">WHERE</span> <span class="n">a</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p class="first">Add property <code class="docutils literal"><span class="pre">task.verbose-stats</span></code> to enable verbose statistics collection for
tasks. The default is <code class="docutils literal"><span class="pre">false</span></code>.</p>
</li>
<li><p class="first">Format binary data in the CLI as a hex dump.</p>
</li>
<li><p class="first">Add approximate numeric histogram function <a class="reference internal" href="../functions/aggregate.html#numeric_histogram" title="numeric_histogram"><code class="xref py py-func docutils literal"><span class="pre">numeric_histogram()</span></code></a>.</p>
</li>
<li><p class="first">Add <a class="reference internal" href="../functions/array.html#array_sort" title="array_sort"><code class="xref py py-func docutils literal"><span class="pre">array_sort()</span></code></a> function.</p>
</li>
<li><p class="first">Add <a class="reference internal" href="../functions/map.html#map_keys" title="map_keys"><code class="xref py py-func docutils literal"><span class="pre">map_keys()</span></code></a> and <a class="reference internal" href="../functions/map.html#map_values" title="map_values"><code class="xref py py-func docutils literal"><span class="pre">map_values()</span></code></a> functions.</p>
</li>
<li><p class="first">Make <a class="reference internal" href="../functions/window.html#row_number" title="row_number"><code class="xref py py-func docutils literal"><span class="pre">row_number()</span></code></a> completely streaming.</p>
</li>
<li><p class="first">Add property <code class="docutils literal"><span class="pre">task.max-partial-aggregation-memory</span></code> to configure the memory limit
for the partial step of aggregations.</p>
</li>
<li><p class="first">Fix exception when processing queries with an <code class="docutils literal"><span class="pre">UNNEST</span></code> operation where the output was not used.</p>
</li>
<li><p class="first">Only show query progress in UI after the query has been fully scheduled.</p>
</li>
<li><p class="first">Add query execution visualization to the coordinator UI. It can be accessed via the query details page.</p>
</li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="release-0.79.html" class="btn btn-neutral float-right" title="10.66. Release 0.79" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="release-0.81.html" class="btn btn-neutral" title="10.64. Release 0.81" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.144-SNAPSHOT',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>